# Ø¯Ù„ÙŠÙ„ Ø¨Ø³ÙŠØ· Ø¬Ø¯Ø§Ù‹: React + Supabase Ù„Ù„Ù…Ø¨ØªØ¯Ø¦ÙŠÙ†

## ğŸ¯ Ù…Ø§ Ù‡Ùˆ Supabase Ø¨Ø¨Ø³Ø§Ø·Ø©ØŸ

**Supabase** = Ù‚Ø§Ø¹Ø¯Ø© Ø¨ÙŠØ§Ù†Ø§Øª + Authentication + Storage ÙÙŠ Ù…ÙƒØ§Ù† ÙˆØ§Ø­Ø¯

**Ø¨Ø¯ÙˆÙ† Supabase:**
- ØªØ­ØªØ§Ø¬ Ø®Ø§Ø¯Ù… (Server)
- ØªØ­ØªØ§Ø¬ Ù‚Ø§Ø¹Ø¯Ø© Ø¨ÙŠØ§Ù†Ø§Øª
- ØªØ­ØªØ§Ø¬ ÙƒØªØ§Ø¨Ø© API
- Ù…Ø¹Ù‚Ø¯ Ø¬Ø¯Ø§Ù‹! ğŸ˜°

**Ù…Ø¹ Supabase:**
- ÙƒÙ„ Ø´ÙŠØ¡ Ø¬Ø§Ù‡Ø²!
- ØªÙƒØªØ¨ ÙƒÙˆØ¯ Ø¨Ø³ÙŠØ· ÙÙŠ React
- ÙŠØ¹Ù…Ù„ Ù…Ø¨Ø§Ø´Ø±Ø©! ğŸ‰

---

## ğŸ“ Ø§Ù„Ø®Ø·ÙˆØ© 1: Ø¥Ù†Ø´Ø§Ø¡ Ø­Ø³Ø§Ø¨ Supabase (5 Ø¯Ù‚Ø§Ø¦Ù‚)

### 1.1 Ø§Ø°Ù‡Ø¨ Ø¥Ù„Ù‰ Ø§Ù„Ù…ÙˆÙ‚Ø¹
Ø§ÙØªØ­ Ø§Ù„Ù…ØªØµÙØ­ ÙˆØ§Ø°Ù‡Ø¨ Ø¥Ù„Ù‰: **https://supabase.com**

### 1.2 Ø³Ø¬Ù„ Ø­Ø³Ø§Ø¨ Ø¬Ø¯ÙŠØ¯
1. Ø§Ø¶ØºØ· Ø¹Ù„Ù‰ **"Start your project"**
2. Ø§Ø®ØªØ± **"Sign up with GitHub"** Ø£Ùˆ **"Sign up with Google"**
3. Ø³Ø¬Ù„ Ø¨Ø­Ø³Ø§Ø¨Ùƒ

### 1.3 Ø£Ù†Ø´Ø¦ Ù…Ø´Ø±ÙˆØ¹ Ø¬Ø¯ÙŠØ¯
1. Ø§Ø¶ØºØ· **"New Project"**
2. Ø§Ù…Ù„Ø£ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª:
   - **Ø§Ø³Ù… Ø§Ù„Ù…Ø´Ø±ÙˆØ¹**: `nettoyage` (Ø£ÙŠ Ø§Ø³Ù… ØªØ±ÙŠØ¯Ù‡)
   - **ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±**: Ø§Ø®ØªØ± ÙƒÙ„Ù…Ø© Ù…Ø±ÙˆØ± Ù‚ÙˆÙŠØ© (Ø§Ø­ÙØ¸Ù‡Ø§!)
   - **Ø§Ù„Ù…Ù†Ø·Ù‚Ø©**: Ø§Ø®ØªØ± Ø§Ù„Ø£Ù‚Ø±Ø¨ Ù„Ùƒ (Ù…Ø«Ù„Ø§Ù‹: `West US`)
3. Ø§Ø¶ØºØ· **"Create new project"**
4. Ø§Ù†ØªØ¸Ø± Ø¯Ù‚ÙŠÙ‚ØªÙŠÙ† Ø­ØªÙ‰ ÙŠÙƒØªÙ…Ù„ Ø§Ù„Ø¥Ù†Ø´Ø§Ø¡

### 1.4 Ø§Ø­ØµÙ„ Ø¹Ù„Ù‰ Ø§Ù„Ù…ÙØ§ØªÙŠØ­ (Keys)
1. Ø¨Ø¹Ø¯ Ø§ÙƒØªÙ…Ø§Ù„ Ø§Ù„Ø¥Ù†Ø´Ø§Ø¡ØŒ Ø§Ø¶ØºØ· Ø¹Ù„Ù‰ **âš™ï¸ Settings** (ÙÙŠ Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø¬Ø§Ù†Ø¨ÙŠØ©)
2. Ø§Ø¶ØºØ· Ø¹Ù„Ù‰ **API**
3. Ø³ØªØ¬Ø¯:
   - **Project URL**: Ù…Ø«Ù„ `https://abcdefgh.supabase.co`
   - **anon public key**: Ù…Ø«Ù„ `eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...`
4. **Ø§Ù†Ø³Ø®Ù‡Ù…Ø§ ÙˆØ§Ø­ÙØ¸Ù‡Ù…Ø§** - Ø³ØªØ­ØªØ§Ø¬Ù‡Ù…Ø§ Ù„Ø§Ø­Ù‚Ø§Ù‹!

---

## ğŸ“ Ø§Ù„Ø®Ø·ÙˆØ© 2: Ø¥Ø¹Ø¯Ø§Ø¯ React (Ø¯Ù‚ÙŠÙ‚ØªØ§Ù†)

### 2.1 Ø£Ù†Ø´Ø¦ Ù…Ù„Ù `.env`
ÙÙŠ Ù…Ø¬Ù„Ø¯ `site-menage`ØŒ Ø£Ù†Ø´Ø¦ Ù…Ù„Ù Ø§Ø³Ù…Ù‡ `.env` (Ø¨Ø¯ÙˆÙ† Ø£ÙŠ Ø´ÙŠØ¡ Ù‚Ø¨Ù„ Ø§Ù„Ù†Ù‚Ø·Ø©!)

### 2.2 Ø£Ø¶Ù Ø§Ù„Ù…ÙØ§ØªÙŠØ­
Ø§ÙØªØ­ Ù…Ù„Ù `.env` ÙˆØ£Ø¶Ù:

```env
REACT_APP_SUPABASE_URL=https://abcdefgh.supabase.co
REACT_APP_SUPABASE_ANON_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...
```

**Ù…Ù„Ø§Ø­Ø¸Ø©:** Ø§Ø³ØªØ¨Ø¯Ù„ Ø§Ù„Ù‚ÙŠÙ… Ø¨Ø§Ù„Ù‚ÙŠÙ… Ø§Ù„Ø­Ù‚ÙŠÙ‚ÙŠØ© Ù…Ù† Supabase!

### 2.3 ØªØ£ÙƒØ¯ Ù…Ù† ØªØ«Ø¨ÙŠØª Supabase
Ø§ÙØªØ­ Terminal ÙÙŠ Ù…Ø¬Ù„Ø¯ `site-menage` ÙˆØ§ÙƒØªØ¨:

```bash
npm install @supabase/supabase-js
```

---

## ğŸ“ Ø§Ù„Ø®Ø·ÙˆØ© 3: Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ø¬Ø¯Ø§ÙˆÙ„ (5 Ø¯Ù‚Ø§Ø¦Ù‚)

### 3.1 Ø§ÙØªØ­ SQL Editor
1. ÙÙŠ Supabase DashboardØŒ Ø§Ø¶ØºØ· Ø¹Ù„Ù‰ **SQL Editor** (ÙÙŠ Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø¬Ø§Ù†Ø¨ÙŠØ©)
2. Ø§Ø¶ØºØ· **New Query**

### 3.2 Ø£Ù†Ø´Ø¦ Ø¬Ø¯ÙˆÙ„ Ø¨Ø³ÙŠØ·
Ø§Ù†Ø³Ø® ÙˆØ§Ù„ØµÙ‚ Ù‡Ø°Ø§ Ø§Ù„ÙƒÙˆØ¯:

```sql
-- Ø¬Ø¯ÙˆÙ„ Ø§Ù„Ø®Ø¯Ù…Ø§Øª (Services)
CREATE TABLE services (
  id BIGSERIAL PRIMARY KEY,
  name_ar TEXT,
  name_fr TEXT,
  name_en TEXT,
  description_ar TEXT,
  price DECIMAL(10,2),
  is_active BOOLEAN DEFAULT true,
  created_at TIMESTAMPTZ DEFAULT NOW()
);

-- Ø§Ù„Ø³Ù…Ø§Ø­ Ù„Ù„Ø¬Ù…ÙŠØ¹ Ø¨Ù‚Ø±Ø§Ø¡Ø© Ø§Ù„Ø®Ø¯Ù…Ø§Øª
ALTER TABLE services ENABLE ROW LEVEL SECURITY;

CREATE POLICY "Anyone can view services"
ON services FOR SELECT
USING (true);
```

### 3.3 Ø´ØºÙ‘Ù„ Ø§Ù„ÙƒÙˆØ¯
1. Ø§Ø¶ØºØ· **Run** (Ø£Ùˆ F5)
2. Ø¥Ø°Ø§ Ø¸Ù‡Ø±Øª Ø±Ø³Ø§Ù„Ø© "Success" - Ù†Ø¬Ø­Øª! âœ…

---

## ğŸ“ Ø§Ù„Ø®Ø·ÙˆØ© 4: Ø§Ø³ØªØ®Ø¯Ø§Ù… Supabase ÙÙŠ React (Ø³Ù‡Ù„ Ø¬Ø¯Ø§Ù‹!)

### 4.1 Ø£Ù†Ø´Ø¦ Ù…Ù„Ù Supabase
ÙÙŠ `site-menage/src/lib/supabase.js`:

```javascript
import { createClient } from '@supabase/supabase-js'

const supabaseUrl = process.env.REACT_APP_SUPABASE_URL
const supabaseKey = process.env.REACT_APP_SUPABASE_ANON_KEY

export const supabase = createClient(supabaseUrl, supabaseKey)
```

**Ù‡Ø°Ø§ ÙƒÙ„ Ø´ÙŠØ¡!** Ø§Ù„Ø¢Ù† ÙŠÙ…ÙƒÙ†Ùƒ Ø§Ø³ØªØ®Ø¯Ø§Ù… Supabase ÙÙŠ Ø£ÙŠ Ù…ÙƒØ§Ù†.

---

## ğŸ“ Ø§Ù„Ø®Ø·ÙˆØ© 5: Ø£Ù…Ø«Ù„Ø© Ø¨Ø³ÙŠØ·Ø© Ø¬Ø¯Ø§Ù‹

### Ù…Ø«Ø§Ù„ 1: Ø¹Ø±Ø¶ Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø®Ø¯Ù…Ø§Øª

```javascript
import { useState, useEffect } from 'react';
import { supabase } from './lib/supabase';

function ServicesList() {
  const [services, setServices] = useState([]);

  useEffect(() => {
    // Ø¬Ù„Ø¨ Ø§Ù„Ø®Ø¯Ù…Ø§Øª Ù…Ù† Supabase
    async function loadServices() {
      const { data } = await supabase
        .from('services')
        .select('*')
        .eq('is_active', true);
      
      setServices(data || []);
    }
    
    loadServices();
  }, []);

  return (
    <div>
      <h2>Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø®Ø¯Ù…Ø§Øª</h2>
      {services.map(service => (
        <div key={service.id}>
          <h3>{service.name_ar}</h3>
          <p>{service.description_ar}</p>
          <p>Ø§Ù„Ø³Ø¹Ø±: {service.price} Ø¯.Ø¬</p>
        </div>
      ))}
    </div>
  );
}

export default ServicesList;
```

**Ø´Ø±Ø­ Ø¨Ø³ÙŠØ·:**
- `supabase.from('services')` = Ø§Ø®ØªØ± Ø¬Ø¯ÙˆÙ„ "services"
- `.select('*')` = Ø§Ø¬Ù„Ø¨ ÙƒÙ„ Ø§Ù„Ø£Ø¹Ù…Ø¯Ø©
- `.eq('is_active', true)` = Ø­ÙŠØ« is_active = true
- `data` = Ø§Ù„Ù†ØªÙŠØ¬Ø©!

---

### Ù…Ø«Ø§Ù„ 2: Ø¥Ø¶Ø§ÙØ© Ø®Ø¯Ù…Ø© Ø¬Ø¯ÙŠØ¯Ø©

```javascript
import { supabase } from './lib/supabase';

async function addService() {
  const { data, error } = await supabase
    .from('services')
    .insert([{
      name_ar: 'ØªÙ†Ø¸ÙŠÙ Ù…Ù†Ø²Ù„ÙŠ',
      name_fr: 'Nettoyage domestique',
      description_ar: 'Ø®Ø¯Ù…Ø© ØªÙ†Ø¸ÙŠÙ Ø´Ø§Ù…Ù„Ø©',
      price: 5000,
      is_active: true
    }]);
  
  if (error) {
    console.error('Ø®Ø·Ø£:', error);
  } else {
    console.log('ØªÙ…Øª Ø§Ù„Ø¥Ø¶Ø§ÙØ©!', data);
  }
}
```

**Ø´Ø±Ø­ Ø¨Ø³ÙŠØ·:**
- `.insert([{...}])` = Ø£Ø¶Ù Ø³Ø¬Ù„ Ø¬Ø¯ÙŠØ¯
- `data` = Ø§Ù„Ø³Ø¬Ù„ Ø§Ù„Ø°ÙŠ ØªÙ… Ø¥Ø¶Ø§ÙØªÙ‡
- `error` = Ø§Ù„Ø®Ø·Ø£ Ø¥Ù† ÙˆØ¬Ø¯

---

### Ù…Ø«Ø§Ù„ 3: ØªØ­Ø¯ÙŠØ« Ø®Ø¯Ù…Ø©

```javascript
async function updateService(id) {
  const { data, error } = await supabase
    .from('services')
    .update({ price: 6000 })
    .eq('id', id);
  
  if (error) {
    console.error('Ø®Ø·Ø£:', error);
  } else {
    console.log('ØªÙ… Ø§Ù„ØªØ­Ø¯ÙŠØ«!', data);
  }
}
```

**Ø´Ø±Ø­ Ø¨Ø³ÙŠØ·:**
- `.update({...})` = Ø­Ø¯Ø« Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
- `.eq('id', id)` = Ø­ÙŠØ« id = id

---

### Ù…Ø«Ø§Ù„ 4: Ø­Ø°Ù Ø®Ø¯Ù…Ø©

```javascript
async function deleteService(id) {
  const { error } = await supabase
    .from('services')
    .delete()
    .eq('id', id);
  
  if (error) {
    console.error('Ø®Ø·Ø£:', error);
  } else {
    console.log('ØªÙ… Ø§Ù„Ø­Ø°Ù!');
  }
}
```

**Ø´Ø±Ø­ Ø¨Ø³ÙŠØ·:**
- `.delete()` = Ø§Ø­Ø°Ù
- `.eq('id', id)` = Ø­ÙŠØ« id = id

---

## ğŸ“ Ø§Ù„Ø®Ø·ÙˆØ© 6: Authentication (ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„) - Ø¨Ø³ÙŠØ· Ø¬Ø¯Ø§Ù‹!

### Ù…Ø«Ø§Ù„: ØªØ³Ø¬ÙŠÙ„ Ø­Ø³Ø§Ø¨ Ø¬Ø¯ÙŠØ¯

```javascript
import { supabase } from './lib/supabase';

async function signUp(email, password) {
  const { data, error } = await supabase.auth.signUp({
    email: email,
    password: password
  });
  
  if (error) {
    alert('Ø®Ø·Ø£: ' + error.message);
  } else {
    alert('ØªÙ… Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ø­Ø³Ø§Ø¨!');
  }
}
```

### Ù…Ø«Ø§Ù„: ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„

```javascript
async function signIn(email, password) {
  const { data, error } = await supabase.auth.signInWithPassword({
    email: email,
    password: password
  });
  
  if (error) {
    alert('Ø®Ø·Ø£: ' + error.message);
  } else {
    alert('ØªÙ… ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„!');
    console.log('Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…:', data.user);
  }
}
```

### Ù…Ø«Ø§Ù„: Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø§Ù„Ø­Ø§Ù„ÙŠ

```javascript
import { useEffect, useState } from 'react';
import { supabase } from './lib/supabase';

function App() {
  const [user, setUser] = useState(null);

  useEffect(() => {
    // Ø¬Ù„Ø¨ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø§Ù„Ø­Ø§Ù„ÙŠ
    supabase.auth.getUser().then(({ data }) => {
      setUser(data.user);
    });

    // Ø§Ù„Ø§Ø³ØªÙ…Ø§Ø¹ Ù„ØªØºÙŠÙŠØ±Ø§Øª ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„
    supabase.auth.onAuthStateChange((event, session) => {
      setUser(session?.user || null);
    });
  }, []);

  return (
    <div>
      {user ? (
        <p>Ù…Ø±Ø­Ø¨Ø§Ù‹ØŒ {user.email}</p>
      ) : (
        <p>ÙŠØ±Ø¬Ù‰ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„</p>
      )}
    </div>
  );
}
```

---

## ğŸ¯ Ù…Ù„Ø®Øµ Ø¨Ø³ÙŠØ·

### Ø§Ù„Ø¹Ù…Ù„ÙŠØ§Øª Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ©:

| Ø§Ù„Ø¹Ù…Ù„ÙŠØ© | Ø§Ù„ÙƒÙˆØ¯ |
|---------|-------|
| **Ù‚Ø±Ø§Ø¡Ø©** | `supabase.from('table').select('*')` |
| **Ø¥Ø¶Ø§ÙØ©** | `supabase.from('table').insert([{...}])` |
| **ØªØ­Ø¯ÙŠØ«** | `supabase.from('table').update({...}).eq('id', id)` |
| **Ø­Ø°Ù** | `supabase.from('table').delete().eq('id', id)` |
| **ØªØ³Ø¬ÙŠÙ„ Ø¯Ø®ÙˆÙ„** | `supabase.auth.signInWithPassword({...})` |
| **ØªØ³Ø¬ÙŠÙ„ Ø¬Ø¯ÙŠØ¯** | `supabase.auth.signUp({...})` |

### Ø§Ù„ÙÙ„ØªØ±Ø© (Filtering):

```javascript
// Ø­ÙŠØ« is_active = true
.eq('is_active', true)

// Ø­ÙŠØ« price Ø£ÙƒØ¨Ø± Ù…Ù† 1000
.gt('price', 1000)

// ØªØ±ØªÙŠØ¨ Ø­Ø³Ø¨ created_at
.order('created_at', { ascending: false })

// Ø¬Ù„Ø¨ 10 Ø³Ø¬Ù„Ø§Øª ÙÙ‚Ø·
.limit(10)
```

---

## â“ Ø£Ø³Ø¦Ù„Ø© Ø´Ø§Ø¦Ø¹Ø©

### Ø³: ÙƒÙŠÙ Ø£Ø¹Ø±Ù Ø¥Ø°Ø§ Ù†Ø¬Ø­Øª Ø§Ù„Ø¹Ù…Ù„ÙŠØ©ØŸ
**Ø¬:** ØªØ­Ù‚Ù‚ Ù…Ù† `error`:
```javascript
if (error) {
  console.error('Ø®Ø·Ø£:', error.message);
} else {
  console.log('Ù†Ø¬Ø­Øª!', data);
}
```

### Ø³: ÙƒÙŠÙ Ø£ÙÙ„ØªØ± Ø§Ù„Ø¨ÙŠØ§Ù†Ø§ØªØŸ
**Ø¬:** Ø§Ø³ØªØ®Ø¯Ù… `.eq()`, `.gt()`, `.lt()`, Ø¥Ù„Ø®:
```javascript
const { data } = await supabase
  .from('services')
  .select('*')
  .eq('is_active', true)
  .gt('price', 1000);
```

### Ø³: ÙƒÙŠÙ Ø£Ø¬Ù„Ø¨ Ø³Ø¬Ù„ ÙˆØ§Ø­Ø¯ ÙÙ‚Ø·ØŸ
**Ø¬:** Ø§Ø³ØªØ®Ø¯Ù… `.single()`:
```javascript
const { data } = await supabase
  .from('services')
  .select('*')
  .eq('id', 1)
  .single();
```

---

## ğŸ‰ Ù‡Ø°Ø§ ÙƒÙ„ Ø´ÙŠØ¡!

Ø§Ù„Ø¢Ù† Ø£Ù†Øª ØªØ¹Ø±Ù:
- âœ… ÙƒÙŠÙ ØªÙ†Ø´Ø¦ Ù…Ø´Ø±ÙˆØ¹ Supabase
- âœ… ÙƒÙŠÙ ØªØ±Ø¨Ø·Ù‡ Ù…Ø¹ React
- âœ… ÙƒÙŠÙ ØªÙ‚Ø±Ø£ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
- âœ… ÙƒÙŠÙ ØªØ¶ÙŠÙ/ØªØ­Ø¯Ø«/ØªØ­Ø°Ù
- âœ… ÙƒÙŠÙ ØªØ³ØªØ®Ø¯Ù… Authentication

**Ø§Ø¨Ø¯Ø£ Ø§Ù„Ø¢Ù† ÙˆØ§Ø³ØªÙ…ØªØ¹!** ğŸš€

---

## ğŸ“š Ù…Ù„ÙØ§Øª Ù…ÙÙŠØ¯Ø©

- `site-menage/src/lib/supabase.js` - Ù…Ù„Ù Supabase
- `site-menage/src/examples/` - Ø£Ù…Ø«Ù„Ø© Ø£ÙƒØ«Ø±
- `supabase-schema-complete.sql` - Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¬Ø¯Ø§ÙˆÙ„

**Ø£Ø³Ø¦Ù„Ø©ØŸ** Ø±Ø§Ø¬Ø¹ Ø§Ù„Ø£Ù…Ø«Ù„Ø© ÙÙŠ `examples/` Ø£Ùˆ Ø§Ø¨Ø­Ø« ÙÙŠ [ÙˆØ«Ø§Ø¦Ù‚ Supabase](https://supabase.com/docs)!

